{% extends "_layouts/auth.njk" %}

{% block body %}
  <form action="/app/user/edit/salvaredicao" method="post"
  enctype="multipart/form-data">
    {% include "_partials/flash.njk" %}
    <br>
    <input name="id" type="hidden" value="{{useredit.id}}">

    <label for="avatar">
      <img src="/files/{{useredit.avatar}}" height="24"/>
    </label>

    <input id="avatar" name="avatar" type="file"/>

    <input type="text" name="name" placeholder="Nome completo" value="{{useredit.name}} {{useredit.id}}">

    <button type="submit">
      <i class="fas fa-check"></i>
      &nbsp;&nbsp;&nbsp; Editar</button>
    <a href="/">
      Voltar</a>
  </form>

  <script type="text/javascript">
    var avatarInput = document.getElementById('avatar')
      var img = document.querySelector('label[for=avatar] img')

        avatarInput.onchange = function (e) {
          img
            .classList
            .add('preview')
          img.src = URL.createObjectURL(e.target.files[0])
        }

        var password = document.getElementById("password"),
          confirm_password = document.getElementById("confirm_password");

        function validatePassword() {
          if (password.value != confirm_password.value) {
            confirm_password.setCustomValidity("Senhas diferentes!");
          } else {
            confirm_password.setCustomValidity('');
          }
        }

        password.onchange = validatePassword;
        confirm_password.onkeyup = validatePassword;
  </script>
{% endblock %}
