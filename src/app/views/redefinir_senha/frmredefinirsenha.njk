{% extends "_layouts/auth.njk" %}

{% block body %}
  <div >

    <form action="/redefinirSenhaPost" method="post">
      <div class="auth-wrapper">
        <img src="/files/{{ user.avatar}}" height="24"/>
      </div>

      <strong>Olá,
        {{ user.name }}</strong>

      <p>Redefina sua senha</p>

      {% include "_partials/flash.njk" %}

      <input name="id" type="hidden" value="{{user.id}}">
      <input name="tokenid" type="hidden" value="{{tokenn.id}}">

      <span class="inputWithIcon">
        <i class="fa fa fa-lock fa-lg fa-fw" aria-hidden="true"></i>
        <input type="password" placeholder="Nova senha" name="password" id="password" required="required">
      </span>

      <span class="inputWithIcon">
        <i class="fa fa fa-lock fa-lg fa-fw" aria-hidden="true"></i>
        <input type="password" placeholder="Confirme Senha" name="confirma_password" id="confirm_password" required="required">
      </span>

      <button type="submit">
        <i class="fas fa-check"></i>
        &nbsp;&nbsp;&nbsp; Solicitar</button>
      <a href="/">
        <i class="fas fa-arrow-left"></i>
        &nbsp;&nbsp;&nbsp; Já possuo conta</a>
    </form>
  </div>
  <script type="text/javascript">

    var password = document.getElementById("password"),
      confirm_password = document.getElementById("confirm_password");

    function validatePassword() {
      if (password.value != confirm_password.value) {
        confirm_password.setCustomValidity("Senhas diferentes!");
      } else {
        confirm_password.setCustomValidity('');
      }
    }

    password.onchange = validatePassword;
    confirm_password.onkeyup = validatePassword;
  </script>

{% endblock %}
